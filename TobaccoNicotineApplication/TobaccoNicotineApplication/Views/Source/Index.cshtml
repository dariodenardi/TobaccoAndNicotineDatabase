@using TobaccoNicotineApplication.Utilities
@using System.ComponentModel.DataAnnotations

@model TobaccoNicotineApplication.Models.Source

@{
    ViewBag.Title = "Index";
    ViewBag.PageTitle = "Source";
    ViewBag.TitlePrincipal = "List of Sources";

    List<SelectListItem> listItems = new List<SelectListItem>();
    listItems.Add(new SelectListItem
    {
        Text = "20",
        Value = "20"
    });
    listItems.Add(new SelectListItem
    {
        Text = "30",
        Value = "30",
    });
    listItems.Add(new SelectListItem
    {
        Text = "40",
        Value = "40"
    });
}

@{
    string sourceName = StaticName.SourceName();
    string sourceDate = StaticName.UploadDate();
    string sourceTime = StaticName.UploadTime();
    string sourceLink = StaticName.Link();
    string sourceRepository = StaticName.Repository();
    string sourceDateDownload = StaticName.DownloadDate();
    string sourceUsername = StaticName.UserName();
}

@section styles {
    <!-- Plugin -->
    @Styles.Render("~/Content/colorpicker")

    <!-- Sweet Alert -->
    @Styles.Render("~/Content/sweetalert")

    <!-- Chosen -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/chosen/1.1.0/chosen.css">

    <!-- Dropzone css -->
    @Styles.Render("~/Content/dropzone")
}

<div class="panel-group panel-group-joined" id="accordion-region">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a id="collapseTitleOne" data-toggle="collapse" data-parent="#accordion-region" href="#collapseOne">
                    Filter
                </a>
            </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body">
                <!--Filter-->
                <dl class="dl-horizontal">
                    <dt>
                        @Html.Label(sourceName, new { @class = "control-label col-md-2" })
                    </dt>

                    <dd>
                        <select id="sourceNameString" onchange="" class="form-control chosen-select" multiple="multiple"></select>
                    </dd>

                    <dt>
                        @Html.Label(sourceLink, new { @class = "control-label col-md-2" })
                    </dt>

                    <dd>
                        <select id="sourceLinkString" onchange="" class="form-control chosen-select" multiple="multiple"></select>
                    </dd>

                    <dt>
                        @Html.Label(sourceRepository, new { @class = "control-label col-md-2" })
                    </dt>

                    <dd>
                        <select id="sourceRepositoryString" onchange="" class="form-control chosen-select" multiple="multiple"></select>
                    </dd>

                    <dt>
                        @Html.Label(sourceDateDownload, new { @class = "control-label col-md-2" })
                    </dt>

                    <dd>
                        <select id="sourceDateSourceString" onchange="" class="form-control chosen-select" multiple="multiple"></select>
                    </dd>

                    <dt>
                        @Html.Label(sourceUsername, new { @class = "control-label col-md-2" })
                    </dt>

                    <dd>
                        <select id="sourceUsernameString" onchange="" class="form-control chosen-select" multiple="multiple"></select>
                    </dd>
                </dl>

                <button type="submit" class="btn btn-primary waves-effect" onclick='FilterSource()'>Filter</button>
                <!--Filter-->
            </div>
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a id="collapseTitleTwo" data-toggle="collapse" data-parent="#accordion-region" href="#collapseTwo" class="collapsed">
                    Rows
                </a>
            </h4>
        </div>
        <div id="collapseTwo" class="panel-collapse collapse">
            <div class="panel-body">
                <!--Table-->
                <button type="button" class="btn btn-default" onclick="toggle2()">Select/Deselect All</button>
                <button type="button" class="btn btn-default" onclick="Copy()">Copy to Clipboard</button>
                @if (User.IsInRole("Admin") || User.IsInRole("Writer"))
                {
                    <button type="button" class="btn btn-default" onclick="Paste()">Paste from Clipboard</button>
                }
                <br />
                <div class="col-lg-12">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th width="5%"></th>
                                    <th width="17%">@sourceName <img id="idSortable1" src="~/Images/Sortable/bg.png" alt="bg" onclick="SortableName()" style="width:auto;"></th>
                                    <th width="17%">@sourceLink <img id="idSortable2" src="~/Images/Sortable/bg.png" alt="bg" onclick="SortableLink()" style="width:auto;"></th>
                                    <th width="17%">@sourceRepository <img id="idSortable3" src="~/Images/Sortable/bg.png" alt="bg" onclick="SortableRepository()" style="width:auto;"></th>
                                    <th width="17%">@sourceDateDownload <img id="idSortable4" src="~/Images/Sortable/bg.png" alt="bg" onclick="SortableDateDownload()" style="width:auto;"></th>
                                    <th width="17%">@sourceUsername <img id="idSortable5" src="~/Images/Sortable/bg.png" alt="bg" onclick="SortableUsername()" style="width:auto;"></th>
                                    <th width="10%"></th>
                                </tr>
                            </thead>
                            <tbody id="SetSourceList"></tbody>
                            <tr id="LoadingStatus"></tr>
                        </table>
                    </div>

                    <div style="display: inline-grid">
                        @Html.Label("Show entries", new { @class = "control-label" })
                        @Html.DropDownList("showEntry", listItems, new { @class = "form-control", @onchange = "FilterSource(0)" })
                    </div>
                    @if (User.IsInRole("Admin") || User.IsInRole("Writer"))
                    {
                        <br />
                        <br />
                        <button type="button" class="btn btn-success" onclick="AddNewSource()">Add New Source</button>
                    }
                    @if (User.IsInRole("Admin"))
                    {
                        <button type="button" class="btn btn-danger" onclick="deleteRows()">Delete Source/s</button>
                    }
                    <br />
                    <br />
                    <div class="col-md-12 text-center">
                        <!--<ul class="pagination pagination-lg pager" id="myPager"></ul>-->
                        <ul class="pagination m-b-5" id="myPager"></ul>
                    </div>
                </div>
                <!--Table-->
            </div>
        </div>
    </div>

    @if (User.IsInRole("Admin") || @User.IsInRole("Writer"))
    {
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a id="collapseTitleTree" data-toggle="collapse" data-parent="#accordion-region" href="#collapseTree" class="collapsed">
                        Upload files
                    </a>
                </h4>
            </div>
            <div id="collapseTree" class="panel-collapse collapse">
                <div class="panel-body">
                    <!-- form -->
                    <form action="/" enctype="multipart/form-data" method="POST">
                        <div class="dropzone" id="my-dropzone" name="mainFileUploader">
                            <div class="fallback">
                                <input name="file" type="file" multiple />
                            </div>
                        </div>
                    </form>
                    <!-- form -->
                </div>
            </div>
        </div>
    }
</div>

@section scripts {
    <!-- Pagination  -->
    @Scripts.Render("~/Scripts/pagination")

    <!-- Chosen  -->
    <script src="//cdn.jsdelivr.net/chosen/1.1.0/chosen.jquery.js"></script>

    <!-- Sweet-Alert  -->
    @Scripts.Render("~/Scripts/sweetalert")

    <!-- Dropzone js -->
    @Scripts.Render("~/Scripts/dropzone")

    <script>
        var boolAdmin = '@User.IsInRole("Admin")' == "True";
        var boolWriter = '@User.IsInRole("Writer")' == "True";
        var boolReader = '@User.IsInRole("Reader")' == "True";
    </script>

    @Scripts.Render("~/Scripts/source")
}